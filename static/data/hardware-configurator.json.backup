{
  "schema_version": "2.0",
  "metadata": {
    "created_by": "OpenHD Community",
    "last_updated": "2025-01-11",
    "validation_engine": "structured-rules-v2",
    "description": "Hardware compatibility configurator for OpenHD Evo releases"
  },

  "compatibility_engine": {
    "configuration": {
      "supported_chipsets": [
        "RTL8812AU", "RTL8814AU", "RTL8811AU", "RTL8812BU", "RTL8812EU"
      ],
      "supported_interfaces": [
        "csi", "usb", "usb2", "usb3", "hdmi", "hdmi_in", "hdmi_out", "ethernet", "gpio", "ip"
      ],
      "valid_statuses": [
        "recommended", "supported", "legacy", "development", "specialized", "limited"
      ],
      "auto_update_lists": true
    },

    "structured_validation_rules": [
      {
        "rule_id": "interface_compatibility",
        "type": "interface_mismatch",
        "severity": "error",
        "message": "Camera requires {camera.interface} interface but {sbc.name} doesn't support {camera.interface}",
        "parameters": {
          "required_interface": "csi",
          "component_type": "camera",
          "target_type": "sbc"
        }
      },
      {
        "rule_id": "role_compatibility",
        "type": "role_incompatible", 
        "severity": "error",
        "message": "{sbc.name} doesn't support {selected_role} role",
        "parameters": {}
      },
      {
        "rule_id": "legacy_camera_warning",
        "type": "status_check",
        "severity": "warning",
        "message": "This camera uses legacy drivers and is not recommended for FPV use",
        "parameters": {
          "component_type": "camera",
          "status": "legacy",
          "operator": "equals"
        }
      },
      {
        "rule_id": "thermal_usb_bandwidth",
        "type": "feature_check",
        "severity": "info",
        "message": "Thermal cameras may have USB bandwidth limitations and require special setup",
        "parameters": {
          "component_type": "camera",
          "required_features": ["thermal"],
          "operator": "and"
        }
      },
      {
        "rule_id": "multi_camera_limitation",
        "type": "count_check",
        "severity": "warning",
        "message": "Multiple cameras use software encoding for secondary camera. Not recommended for high quality cameras.",
        "parameters": {
          "count_field": "camera_count",
          "operator": "gt",
          "threshold": 1
        }
      },
      {
        "rule_id": "radxa_camera_limitation",
        "type": "manufacturer_mismatch",
        "severity": "warning",
        "message": "Radxa SBCs currently have limited camera support. IMX415 is the only fully supported camera.",
        "parameters": {
          "component1_type": "sbc",
          "component2_type": "camera",
          "operator": "different"
        }
      },
      {
        "rule_id": "x86_camera_limitation",
        "type": "interface_mismatch",
        "severity": "error",
        "message": "X86 systems don't support CSI cameras. Use USB or IP cameras instead.",
        "parameters": {
          "required_interface": "csi",
          "component_type": "camera",
          "target_type": "sbc"
        }
      },
      {
        "rule_id": "chipset_compatibility",
        "type": "chipset_whitelist",
        "severity": "error",
        "message": "WiFi chipset {wifi.chipset} is not supported by OpenHD",
        "parameters": {
          "component_type": "wifi",
          "use_global_whitelist": true
        }
      }
    ],

    "validation_rules": [
      {
        "rule_id": "interface_compatibility",
        "type": "requirement",
        "condition": "camera.interface == 'csi' && !sbc.interfaces.includes('csi')",
        "severity": "error",
        "message": "Camera requires CSI interface but {sbc.name} doesn't support CSI"
      },
      {
        "rule_id": "role_compatibility", 
        "type": "requirement",
        "condition": "selected_role && !sbc.role_support.includes(selected_role) && !sbc.role_support.includes('both')",
        "severity": "error",
        "message": "{sbc.name} doesn't support {selected_role} role"
      },
      {
        "rule_id": "legacy_camera_warning",
        "type": "warning",
        "condition": "camera.status == 'legacy'",
        "severity": "warning", 
        "message": "This camera uses legacy drivers and is not recommended for FPV use"
      },
      {
        "rule_id": "thermal_usb_bandwidth",
        "type": "warning",
        "condition": "camera.features.includes('thermal') && camera.interface == 'usb'",
        "severity": "info",
        "message": "Thermal cameras may have USB bandwidth limitations and require special setup"
      },
      {
        "rule_id": "multi_camera_limitation",
        "type": "warning",
        "condition": "camera_count > 1",
        "severity": "warning",
        "message": "Multiple cameras use software encoding for secondary camera. Not recommended for high quality cameras."
      },
      {
        "rule_id": "radxa_camera_limitation",
        "type": "warning",
        "condition": "sbc.manufacturer == 'Radxa' && camera.manufacturer != 'Radxa'",
        "severity": "warning",
        "message": "Radxa SBCs currently have limited camera support. IMX415 is the only fully supported camera."
      },
      {
        "rule_id": "x86_camera_limitation", 
        "type": "warning",
        "condition": "sbc.id == 'x86_generic' && camera.interface == 'csi'",
        "severity": "error",
        "message": "X86 systems don't support CSI cameras. Use USB or IP cameras instead."
      },
      {
        "rule_id": "chipset_compatibility",
        "type": "requirement",
        "condition": "wifi.chipset && !['RTL8812AU', 'RTL8814AU', 'RTL8811AU', 'RTL8812BU', 'RTL8812EU'].includes(wifi.chipset)",
        "severity": "error",
        "message": "WiFi chipset {wifi.chipset} is not supported by OpenHD"
      }
    ],

    "performance_matrix": [
      {
        "sbc": "openhd_custom",
        "camera_interface": "csi",
        "performance": {
          "max_resolution": "4K",
          "max_fps": "60",
          "latency": "ultra_low",
          "encoding": "h264_h265_hardware"
        }
      },
      {
        "sbc": "radxa_rock5b",
        "camera_interface": "csi", 
        "performance": {
          "max_resolution": "4K",
          "max_fps": "30", 
          "latency": "low",
          "encoding": "h265_hardware"
        }
      },
      {
        "sbc": "rpi_4b",
        "camera_interface": "csi",
        "performance": {
          "max_resolution": "1080p",
          "max_fps": "60",
          "latency": "medium", 
          "encoding": "h264_hardware"
        }
      },
      {
        "sbc": "rpi_zero_2",
        "camera_interface": "csi",
        "performance": {
          "max_resolution": "720p",
          "max_fps": "30",
          "latency": "high",
          "encoding": "h264_software"
        }
      }
    ]
  },

  "component_categories": {
    "sbcs": {
      "schema": {
        "required": ["id", "name", "role_support", "interfaces", "performance"],
        "properties": {
          "role_support": {
            "type": "array",
            "items": ["air", "ground", "both"]
          },
          "interfaces": {
            "type": "array", 
            "items": ["csi", "usb3", "usb2", "hdmi_out", "hdmi_in", "gpio", "ethernet"]
          },
          "performance": {
            "encoding": ["h264", "h265", "software_only"],
            "decoding": ["hardware", "software_only"],
            "latency_tier": ["ultra_low", "low", "medium", "high"]
          }
        }
      },
      "components": [
        {
          "id": "rpi_cm4",
          "name": "Raspberry Pi Compute Module CM4", 
          "category": "sbc",
          "manufacturer": "Raspberry Pi Foundation",
          "role_support": ["air", "ground"],
          "interfaces": ["csi", "usb3", "usb2", "hdmi_out", "gpio", "ethernet"],
          "performance": {
            "encoding": ["h264"],
            "decoding": ["hardware"],
            "latency_tier": "medium"
          },
          "power_requirements": {
            "voltage": "5V",
            "current_max": "3A",
            "power_consumption_idle": "2W"
          },
          "status": "recommended",
          "price_range": "medium",
          "notes": "Requires dt-blob.bin for dual camera support on air. Carrier board needs HDMI and USB for ground use.",
          "documentation_url": "/hardware/raspberry"
        },
        {
          "id": "rpi_4b",
          "name": "Raspberry Pi 4B",
          "category": "sbc", 
          "manufacturer": "Raspberry Pi Foundation",
          "role_support": ["air", "ground"],
          "interfaces": ["csi", "usb3", "usb2", "hdmi_out", "gpio", "ethernet"],
          "performance": {
            "encoding": ["h264"],
            "decoding": ["hardware"], 
            "latency_tier": "medium"
          },
          "power_requirements": {
            "voltage": "5V",
            "current_max": "3A",
            "power_consumption_idle": "3W"
          },
          "status": "recommended",
          "price_range": "low",
          "documentation_url": "/hardware/raspberry"
        },
        {
          "id": "rpi_3b_plus",
          "name": "Raspberry Pi 3B+",
          "category": "sbc",
          "manufacturer": "Raspberry Pi Foundation", 
          "role_support": ["air", "ground"],
          "interfaces": ["csi", "usb2", "hdmi_out", "gpio", "ethernet"],
          "performance": {
            "encoding": ["h264"],
            "decoding": ["software_only"],
            "latency_tier": "medium"
          },
          "power_requirements": {
            "voltage": "5V",
            "current_max": "2.5A"
          },
          "status": "supported",
          "price_range": "low",
          "documentation_url": "/hardware/raspberry"
        },
        {
          "id": "rpi_zero_2",
          "name": "Raspberry Pi Zero 2",
          "category": "sbc",
          "manufacturer": "Raspberry Pi Foundation",
          "role_support": ["air"],
          "interfaces": ["csi", "usb2", "hdmi_out", "gpio"],
          "performance": {
            "encoding": ["h264"],
            "decoding": ["software_only"],
            "latency_tier": "high"
          },
          "status": "supported",
          "price_range": "very_low",
          "notes": "Most cost-effective option",
          "documentation_url": "/hardware/raspberry"
        },
        {
          "id": "radxa_rock5b",
          "name": "Radxa Rock5B", 
          "category": "sbc",
          "manufacturer": "Radxa",
          "role_support": ["air", "ground"],
          "interfaces": ["csi", "usb3", "usb2", "hdmi_out", "hdmi_in", "gpio", "ethernet"],
          "performance": {
            "encoding": ["h264", "h265"],
            "decoding": ["hardware"],
            "latency_tier": "low"
          },
          "status": "recommended",
          "price_range": "medium",
          "notes": "Significantly higher performance than Raspberry Pi. Early stage software development. HDMI pipeline support.",
          "documentation_url": "/hardware/radxa"
        },
        {
          "id": "radxa_rock5a",
          "name": "Radxa Rock5A",
          "category": "sbc", 
          "manufacturer": "Radxa",
          "role_support": ["air", "ground"],
          "interfaces": ["csi", "usb3", "usb2", "hdmi_out", "gpio", "ethernet"],
          "performance": {
            "encoding": ["h264", "h265"],
            "decoding": ["hardware"],
            "latency_tier": "low"
          },
          "status": "supported",
          "price_range": "medium",
          "notes": "Early stage software development",
          "documentation_url": "/hardware/radxa"
        },
        {
          "id": "x86_generic",
          "name": "X86 Desktop/Laptop",
          "category": "sbc",
          "manufacturer": "Generic",
          "role_support": ["ground"],
          "interfaces": ["usb3", "usb2", "hdmi_out", "ethernet"],
          "performance": {
            "encoding": ["h264", "h265"],
            "decoding": ["hardware"],
            "latency_tier": "low"
          },
          "status": "supported", 
          "price_range": "varies",
          "notes": "Performance varies greatly on hardware used. Requires Ubuntu 22.04. May interfere with normal WiFi setup.",
          "documentation_url": "/hardware/X86"
        },
        {
          "id": "openhd_custom",
          "name": "OpenHD Custom Hardware",
          "category": "sbc",
          "manufacturer": "OpenHD",
          "role_support": ["air", "ground"], 
          "interfaces": ["csi", "usb3", "hdmi_out"],
          "performance": {
            "encoding": ["h264", "h265"],
            "decoding": ["hardware"],
            "latency_tier": "ultra_low"
          },
          "status": "development",
          "price_range": "high",
          "notes": "Lowest possible latency with carefully selected components and optimizations. In development.",
          "documentation_url": "/hardware/custom-hardware"
        }
      ]
    },

    "cameras": {
      "schema": {
        "required": ["id", "name", "interface", "max_resolution", "sensor"],
        "properties": {
          "interface": {"enum": ["csi", "usb", "hdmi", "ip"]},
          "features": {
            "type": "array",
            "items": ["hdr", "low_light", "thermal", "high_fps", "wide_angle", "autofocus"]
          }
        }
      },
      "components": [
        {
          "id": "arducam_imx708",
          "name": "Arducam SkyMaster HDR (IMX708)",
          "category": "camera",
          "manufacturer": "Arducam",
          "interface": "csi",
          "max_resolution": "4056x3040", 
          "max_fps": "30",
          "sensor": "IMX708",
          "features": ["hdr", "wide_angle", "high_quality"],
          "field_of_use": "Highest Quality",
          "overlay_type": "libcamera_imx708",
          "status": "recommended",
          "price_range": "medium",
          "price_usd": 37,
          "notes": "Top recommended camera for OpenHD",
          "compatible_sbcs": ["rpi_cm4", "rpi_4b", "rpi_3b_plus", "rpi_zero_2"],
          "links": {
            "buy_url": "https://www.arducam.com/product/presalearducam-12mp-imx708-hdr-120-wide-angle-camera-module-with-m12-lens-for-raspberry-pi/",
            "documentation_url": "/hardware/cameras",
            "vendor_page": "https://www.arducam.com/openhd/"
          }
        },
        {
          "id": "arducam_imx519",
          "name": "Arducam SkyVision Pro (IMX519)",
          "category": "camera",
          "manufacturer": "Arducam", 
          "interface": "csi",
          "max_resolution": "4656x3496",
          "max_fps": "30",
          "sensor": "IMX519",
          "features": ["high_quality", "wide_angle"],
          "field_of_use": "High Quality", 
          "overlay_type": "libcamera_imx519",
          "status": "recommended",
          "price_range": "medium",
          "price_usd": 37,
          "compatible_sbcs": ["rpi_cm4", "rpi_4b", "rpi_3b_plus", "rpi_zero_2"],
          "links": {
            "buy_url": "https://www.arducam.com/product/16mp-imx519-camera-module-with-m12-lens-wide-angle-color-rolling-shutter-for-raspberry-pi-and-openhd/",
            "documentation_url": "/hardware/cameras",
            "vendor_page": "https://www.arducam.com/openhd/"
          }
        },
        {
          "id": "arducam_imx477m",
          "name": "Arducam IMX477M Mini",
          "category": "camera",
          "manufacturer": "Arducam",
          "interface": "csi", 
          "max_resolution": "4056x3040",
          "max_fps": "30",
          "sensor": "IMX477",
          "features": ["compact", "lightweight"],
          "field_of_use": "Low weight, small",
          "overlay_type": "libcamera_imx477",
          "status": "recommended", 
          "price_range": "medium",
          "price_usd": 37,
          "compatible_sbcs": ["rpi_cm4", "rpi_4b", "rpi_3b_plus", "rpi_zero_2"],
          "links": {
            "buy_url": "https://www.arducam.com/product/12mp-imx477m-mini-wide-angle-camera-module-for-raspberry-pi/",
            "documentation_url": "/hardware/cameras",
            "vendor_page": "https://www.arducam.com/openhd/"
          }
        },
        {
          "id": "rpi_cam_v1",
          "name": "Raspberry Pi Camera V1 (OV5647)",
          "category": "camera",
          "manufacturer": "Raspberry Pi Foundation",
          "interface": "csi",
          "max_resolution": "2592x1944",
          "max_fps": "30",
          "sensor": "OV5647", 
          "features": [],
          "field_of_use": "Normal",
          "overlay_type": "MMAL",
          "status": "legacy",
          "price_range": "low",
          "price_usd": 25,
          "notes": "Uses legacy raspivid. Not recommended for FPV due to poor outdoor performance. Sensor no longer produced.",
          "compatible_sbcs": ["rpi_cm4", "rpi_4b", "rpi_3b_plus", "rpi_zero_2"],
          "links": {
            "documentation_url": "https://www.raspberrypi.org/documentation/hardware/camera/"
          }
        },
        {
          "id": "arducam_imx462",
          "name": "Arducam STARVIS IMX462",
          "category": "camera", 
          "manufacturer": "Arducam",
          "interface": "csi",
          "max_resolution": "1920x1080",
          "max_fps": "60",
          "sensor": "IMX462",
          "features": ["low_light", "starvis"],
          "field_of_use": "Ultra Low Light",
          "overlay_type": "libcamera_imx462",
          "status": "recommended",
          "price_range": "medium",
          "price_usd": 60,
          "compatible_sbcs": ["rpi_cm4", "rpi_4b", "rpi_3b_plus", "rpi_zero_2"],
          "links": {
            "buy_url": "https://www.uctronics.com/arducam-2mp-ultra-low-light-starvis-imx462-motorized-ir-cut-camera-for-raspberry-pi.html",
            "documentation_url": "/hardware/cameras",
            "vendor_page": "https://www.arducam.com/openhd/"
          }
        },
        {
          "id": "flir_boson_320",
          "name": "FLIR Boson 320",
          "category": "camera",
          "manufacturer": "FLIR",
          "interface": "usb",
          "max_resolution": "320x256",
          "max_fps": "60",
          "sensor": "FLIR",
          "features": ["thermal"],
          "field_of_use": "Thermal Imaging",
          "status": "specialized",
          "price_range": "very_high",
          "notes": "Requires special setup and drivers",
          "compatible_sbcs": ["rpi_cm4", "rpi_4b", "rpi_3b_plus", "radxa_rock5b", "x86_generic"]
        },
        {
          "id": "radxa_imx415",
          "name": "Radxa IMX415",
          "category": "camera",
          "manufacturer": "Radxa",
          "interface": "csi", 
          "max_resolution": "3864x2192",
          "max_fps": "30",
          "sensor": "IMX415",
          "features": [],
          "field_of_use": "Normal",
          "status": "limited",
          "price_range": "medium",
          "notes": "May not meet OpenHD requirements. Initial pipeline included but may not work well.",
          "compatible_sbcs": ["radxa_rock5b", "radxa_rock5a"]
        },
        {
          "id": "hc100f_hdmi",
          "name": "Waveshare HC100F HDMI-CSI",
          "category": "camera",
          "manufacturer": "Waveshare", 
          "interface": "hdmi",
          "max_resolution": "1920x1080",
          "max_fps": "30",
          "features": ["hdmi_input"],
          "field_of_use": "HDMI Source Capture",
          "csi_lanes": 2,
          "status": "supported",
          "price_range": "medium",
          "compatible_sbcs": ["rpi_cm4", "rpi_4b", "rpi_3b_plus"],
          "links": {
            "buy_url": "https://www.waveshare.com/hdmi-to-csi-adapter.htm",
            "documentation_url": "/hardware/cameras/hdmi-cameras-rpi"
          }
        }
      ]
    },

    "wifi_adapters": {
      "schema": {
        "required": ["id", "name", "chipset", "bands", "tx_power"],
        "properties": {
          "bands": {"type": "array", "items": ["2.4GHz", "5.8GHz"]},
          "antennas": {"type": "array", "items": ["rp_sma", "u_fl", "ms156", "internal"]}
        }
      },
      "components": [
        {
          "id": "asus_ac56",
          "name": "ASUS USB-AC56",
          "category": "wifi",
          "manufacturer": "ASUS",
          "chipset": "RTL8812AU",
          "bands": ["2.4GHz", "5.8GHz"],
          "recommended_band": "5.8GHz",
          "tx_power": "500mW",
          "antennas": ["rp_sma", "ms156"],
          "antenna_count": 2,
          "status": "recommended",
          "price_range": "medium",
          "notes": "Most popular choice. Small size, widely available. One internal antenna, second via RP-SMA. We recommend using this in 5.8GHz mode.",
          "fcc_id": "MSQ-USBAC56",
          "links": {
            "fcc_info": "https://fccid.io/MSQ-USBAC56",
            "documentation_url": "/hardware/wifi-adapters"
          }
        },
        {
          "id": "alfa_awus036ach",
          "name": "ALFA AWUS036ACH",
          "category": "wifi",
          "manufacturer": "ALFA",
          "chipset": "RTL8812AU", 
          "bands": ["2.4GHz", "5.8GHz"],
          "recommended_band": "5.8GHz",
          "tx_power": "500mW",
          "antennas": ["rp_sma"],
          "antenna_count": 2,
          "status": "recommended",
          "price_range": "medium",
          "notes": "We recommend using this in 5.8GHz mode.",
          "links": {
            "documentation_url": "/hardware/wifi-adapters"
          }
        },
        {
          "id": "blm8812eu",
          "name": "BLM8812EU",
          "category": "wifi",
          "manufacturer": "Generic",
          "chipset": "RTL8812EU",
          "bands": ["5.8GHz"],
          "tx_power": "800mW+",
          "antennas": ["u_fl"],
          "antenna_count": 2,
          "status": "recommended",
          "price_range": "low",
          "notes": "Most recent and potent chip. Best cost/performance. No FCC/CE certification - use at own risk.",
          "warnings": ["no_certification"],
          "links": {
            "buy_url": "https://es.aliexpress.com/item/1005007386940533.html",
            "documentation_url": "/hardware/wifi-adapters"
          }
        },
        {
          "id": "taobao_rtl8812au",
          "name": "Taobao Card RTL8812AU",
          "category": "wifi", 
          "manufacturer": "Generic",
          "chipset": "RTL8812AU",
          "bands": ["2.4GHz", "5.8GHz"],
          "recommended_band": "5.8GHz",
          "tx_power": "500mW",
          "antennas": ["u_fl"],
          "antenna_count": 2,
          "status": "supported",
          "price_range": "low",
          "notes": "Widely used, tends to get hot. Requires soldered wiring for reliable connection. We recommend using this in 5.8GHz mode.",
          "links": {
            "buy_url": "https://a.aliexpress.com/_rIjofM",
            "documentation_url": "/hardware/wifi-adapters"
          }
        },
        {
          "id": "alfa_awus1900",
          "name": "ALFA AWUS1900",
          "category": "wifi",
          "manufacturer": "ALFA",
          "chipset": "RTL8814AU",
          "bands": ["2.4GHz", "5.8GHz"],
          "tx_power": "500mW",
          "antennas": ["rp_sma"], 
          "antenna_count": 4,
          "status": "supported",
          "price_range": "high"
        },
        {
          "id": "tp_link_t3u_plus",
          "name": "TP-LINK T3U Plus",
          "category": "wifi",
          "manufacturer": "TP-Link",
          "chipset": "RTL8812BU",
          "bands": ["2.4GHz", "5.8GHz"],
          "recommended_band": "5.8GHz",
          "tx_power": "40mW",
          "antennas": ["u_fl", "rp_sma"],
          "antenna_count": 3,
          "status": "supported", 
          "price_range": "low",
          "notes": "We recommend using this in 5.8GHz mode.",
          "links": {
            "documentation_url": "/hardware/wifi-adapters"
          }
        }
      ]
    }
  },

  "compatibility_engine": {
    "validation_rules": [
      {
        "rule_id": "interface_compatibility",
        "type": "requirement",
        "condition": "camera.interface == 'csi' && !sbc.interfaces.includes('csi')",
        "severity": "error",
        "message": "Camera requires CSI interface but {sbc.name} doesn't support CSI"
      },
      {
        "rule_id": "role_compatibility", 
        "type": "requirement",
        "condition": "selected_role && !sbc.role_support.includes(selected_role) && !sbc.role_support.includes('both')",
        "severity": "error",
        "message": "{sbc.name} doesn't support {selected_role} role"
      },
      {
        "rule_id": "legacy_camera_warning",
        "type": "warning",
        "condition": "camera.status == 'legacy'",
        "severity": "warning", 
        "message": "This camera uses legacy drivers and is not recommended for FPV use"
      },
      {
        "rule_id": "thermal_usb_bandwidth",
        "type": "warning",
        "condition": "camera.features.includes('thermal') && camera.interface == 'usb'",
        "severity": "info",
        "message": "Thermal cameras may have USB bandwidth limitations and require special setup"
      },
      {
        "rule_id": "multi_camera_limitation",
        "type": "warning",
        "condition": "camera_count > 1",
        "severity": "warning",
        "message": "Multiple cameras use software encoding for secondary camera. Not recommended for high quality cameras."
      },
      {
        "rule_id": "radxa_camera_limitation",
        "type": "warning",
        "condition": "sbc.manufacturer == 'Radxa' && camera.manufacturer != 'Radxa'",
        "severity": "warning",
        "message": "Radxa SBCs currently have limited camera support. IMX415 is the only fully supported camera."
      },
      {
        "rule_id": "x86_camera_limitation", 
        "type": "warning",
        "condition": "sbc.id == 'x86_generic' && camera.interface == 'csi'",
        "severity": "error",
        "message": "X86 systems don't support CSI cameras. Use USB or IP cameras instead."
      },
      {
        "rule_id": "chipset_compatibility",
        "type": "requirement",
        "condition": "wifi.chipset && !['RTL8812AU', 'RTL8814AU', 'RTL8811AU', 'RTL8812BU', 'RTL8812EU'].includes(wifi.chipset)",
        "severity": "error",
        "message": "WiFi chipset {wifi.chipset} is not supported by OpenHD"
      },
      {
        "rule_id": "wifi_usb_requirement",
        "type": "requirement", 
        "condition": "!sbc.interfaces.includes('usb3') && !sbc.interfaces.includes('usb2')",
        "severity": "error",
        "message": "WiFi adapters require USB ports which are not available on this SBC"
      },
      {
        "rule_id": "high_power_adapter_warning",
        "type": "warning",
        "condition": "sbc.id == 'rpi_zero_2' && wifi.tx_power && wifi.tx_power.includes('500mW')",
        "severity": "warning",
        "message": "High power adapter may require external power supply for reliable operation"
      },
      {
        "rule_id": "uncertified_adapter_warning",
        "type": "warning",
        "condition": "wifi.warnings && wifi.warnings.includes('no_certification')",
        "severity": "warning", 
        "message": "This adapter lacks FCC/CE certification - use at your own legal risk"
      }
    ],

    "performance_matrix": [
      {
        "sbc": "openhd_custom",
        "camera_interface": "csi",
        "performance": {
          "max_resolution": "4K",
          "max_fps": "60",
          "latency": "ultra_low",
          "encoding": "h264_h265_hardware"
        }
      },
      {
        "sbc": "radxa_rock5b",
        "camera_interface": "csi", 
        "performance": {
          "max_resolution": "4K",
          "max_fps": "30", 
          "latency": "low",
          "encoding": "h265_hardware"
        }
      },
      {
        "sbc": "rpi_4b",
        "camera_interface": "csi",
        "performance": {
          "max_resolution": "1080p",
          "max_fps": "60",
          "latency": "medium", 
          "encoding": "h264_hardware"
        }
      },
      {
        "sbc": "rpi_zero_2",
        "camera_interface": "csi",
        "performance": {
          "max_resolution": "720p",
          "max_fps": "30",
          "latency": "high",
          "encoding": "h264_software"
        }
      }
    ]
  },

  "use_case_templates": [
    {
      "id": "fpv_racing",
      "name": "FPV Racing",
      "description": "Ultra-low latency for competitive racing",
      "priority_weights": {
        "latency": 1.0,
        "fps": 0.9,
        "resolution": 0.3,
        "price": 0.6
      },
      "required_features": ["hardware_encode"],
      "recommended_components": {
        "sbcs": ["openhd_custom", "radxa_rock5b"],
        "cameras": ["arducam_imx708", "arducam_imx462"]
      },
      "target_specs": {
        "max_latency_ms": "25",
        "min_fps": "60",
        "preferred_resolution": "1080p"
      }
    },
    {
      "id": "cinematic",
      "name": "Cinematic/Photography", 
      "description": "Highest image quality for content creation",
      "priority_weights": {
        "resolution": 1.0,
        "image_quality": 0.9,
        "latency": 0.4,
        "price": 0.5
      },
      "recommended_components": {
        "sbcs": ["radxa_rock5b", "rpi_cm4"],
        "cameras": ["arducam_imx708", "arducam_imx519"]
      },
      "target_specs": {
        "min_resolution": "4K",
        "preferred_encoding": "h265"
      }
    },
    {
      "id": "search_rescue",
      "name": "Search & Rescue",
      "description": "Thermal imaging and reliability focus",
      "priority_weights": {
        "reliability": 1.0,
        "thermal_capability": 1.0,
        "range": 0.8,
        "price": 0.3
      },
      "required_features": ["thermal"],
      "recommended_components": {
        "sbcs": ["rpi_4b", "x86_generic"],
        "cameras": ["flir_boson_320"]
      }
    },
    {
      "id": "beginner_budget",
      "name": "Beginner Budget Build",
      "description": "Cost-effective starter setup",
      "priority_weights": {
        "price": 1.0,
        "ease_of_use": 0.9,
        "reliability": 0.8,
        "performance": 0.5
      },
      "recommended_components": {
        "sbcs": ["rpi_zero_2", "rpi_3b_plus"],
        "cameras": ["arducam_imx477m"]
      },
      "target_specs": {
        "max_budget_usd": "150"
      }
    }
  ],

  "wizard_flow": {
    "steps": [
      {
        "step": "use_case_selection",
        "title": "What's your primary use case?",
        "type": "single_choice",
        "options": ["fpv_racing", "cinematic", "search_rescue", "beginner_budget", "custom"],
        "affects": "component_filtering_and_recommendations"
      },
      {
        "step": "role_selection", 
        "title": "Air or Ground station?",
        "type": "single_choice",
        "options": ["air", "ground", "both"],
        "affects": "sbc_filtering"
      },
      {
        "step": "budget_range",
        "title": "What's your budget range?",
        "type": "slider",
        "range": [50, 1000],
        "unit": "USD",
        "affects": "price_filtering"
      },
      {
        "step": "sbc_selection",
        "title": "Select your Single Board Computer",
        "type": "component_choice",
        "category": "sbcs",
        "real_time_validation": true,
        "affects": "camera_and_wifi_compatibility"
      },
      {
        "step": "camera_selection",
        "title": "Select your camera",
        "type": "component_choice", 
        "category": "cameras",
        "real_time_validation": true,
        "affects": "performance_estimation"
      },
      {
        "step": "wifi_selection",
        "title": "Select your WiFi adapter",
        "type": "component_choice",
        "category": "wifi_adapters",
        "real_time_validation": true
      },
      {
        "step": "summary",
        "title": "Build Summary",
        "type": "summary",
        "shows": ["compatibility_status", "estimated_performance", "total_price", "setup_complexity"]
      }
    ]
  },

  "export_options": [
    {
      "format": "shopping_list",
      "description": "Generate shopping list with links and prices"
    },
    {
      "format": "config_file", 
      "description": "Export OpenHD configuration parameters"
    },
    {
      "format": "setup_guide",
      "description": "Step-by-step setup instructions for your build"
    },
    {
      "format": "share_url",
      "description": "Shareable URL for your configuration"
    }
  ]
}